var VueMeteorTracker=function(t){"use strict";var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=200,n="__lodash_hash_undefined__",o=1/0,i=9007199254740991,a="[object Arguments]",u="[object Function]",s="[object GeneratorFunction]",c="[object Symbol]",f=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,l="object"==typeof r&&r&&r.Object===Object&&r,p="object"==typeof self&&self&&self.Object===Object&&self,d=l||p||Function("return this")();function b(t,r){return!!(t?t.length:0)&&function(t,r,e){if(r!=r)return function(t,r,e,n){var o=t.length,i=e+(n?1:-1);for(;n?i--:++i<o;)if(r(t[i],i,t))return i;return-1}(t,g,e);var n=e-1,o=t.length;for(;++n<o;)if(t[n]===r)return n;return-1}(t,r,0)>-1}function v(t,r,e){for(var n=-1,o=t?t.length:0;++n<o;)if(e(r,t[n]))return!0;return!1}function y(t,r){for(var e=-1,n=t?t.length:0,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}function _(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}function g(t){return t!=t}function m(t,r){return t.has(r)}function $(t,r){return function(e){return t(r(e))}}var j,O=Array.prototype,S=Function.prototype,w=Object.prototype,A=d["__core-js_shared__"],M=(j=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",k=S.toString,H=w.hasOwnProperty,P=w.toString,D=RegExp("^"+k.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=d.Symbol,x=$(Object.getPrototypeOf,Object),E=w.propertyIsEnumerable,F=O.splice,q=R?R.isConcatSpreadable:void 0,z=Object.getOwnPropertySymbols,C=Math.max,T=W(d,"Map"),I=W(Object,"create");function Y(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function G(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function V(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function B(t){var r=-1,e=t?t.length:0;for(this.__data__=new V;++r<e;)this.add(t[r])}function J(t,r){var e=at(t)||nt(t)?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],n=e.length,o=!!n;for(var i in t)!r&&!H.call(t,i)||o&&("length"==i||rt(i,n))||e.push(i);return e}function K(t,r){for(var e,n,o=t.length;o--;)if((e=t[o][0])===(n=r)||e!=e&&n!=n)return o;return-1}function L(t){return!(!ct(t)||M&&M in t)&&(st(t)||function(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}(t)?D:f).test(function(t){if(null!=t){try{return k.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function N(t){if(!ct(t))return function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r}(t);var r,e,n,o=(e=(r=t)&&r.constructor,n="function"==typeof e&&e.prototype||w,r===n),i=[];for(var a in t)("constructor"!=a||!o&&H.call(t,a))&&i.push(a);return i}function Q(t){return function(t,r,e){var n=r(t);return at(t)?n:_(n,e(t))}(t,ht,Z)}function U(t,r){var e,n,o=t.__data__;return("string"==(n=typeof(e=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?o["string"==typeof r?"string":"hash"]:o.map}function W(t,r){var e=function(t,r){return null==t?void 0:t[r]}(t,r);return L(e)?e:void 0}Y.prototype.clear=function(){this.__data__=I?I(null):{}},Y.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Y.prototype.get=function(t){var r=this.__data__;if(I){var e=r[t];return e===n?void 0:e}return H.call(r,t)?r[t]:void 0},Y.prototype.has=function(t){var r=this.__data__;return I?void 0!==r[t]:H.call(r,t)},Y.prototype.set=function(t,r){return this.__data__[t]=I&&void 0===r?n:r,this},G.prototype.clear=function(){this.__data__=[]},G.prototype.delete=function(t){var r=this.__data__,e=K(r,t);return!(e<0||(e==r.length-1?r.pop():F.call(r,e,1),0))},G.prototype.get=function(t){var r=this.__data__,e=K(r,t);return e<0?void 0:r[e][1]},G.prototype.has=function(t){return K(this.__data__,t)>-1},G.prototype.set=function(t,r){var e=this.__data__,n=K(e,t);return n<0?e.push([t,r]):e[n][1]=r,this},V.prototype.clear=function(){this.__data__={hash:new Y,map:new(T||G),string:new Y}},V.prototype.delete=function(t){return U(this,t).delete(t)},V.prototype.get=function(t){return U(this,t).get(t)},V.prototype.has=function(t){return U(this,t).has(t)},V.prototype.set=function(t,r){return U(this,t).set(t,r),this},B.prototype.add=B.prototype.push=function(t){return this.__data__.set(t,n),this},B.prototype.has=function(t){return this.__data__.has(t)};var X=z?$(z,Object):lt,Z=z?function(t){for(var r=[];t;)_(r,X(t)),t=x(t);return r}:lt;function tt(t){return at(t)||nt(t)||!!(q&&t&&t[q])}function rt(t,r){return!!(r=null==r?i:r)&&("number"==typeof t||h.test(t))&&t>-1&&t%1==0&&t<r}function et(t){if("string"==typeof t||function(t){return"symbol"==typeof t||ft(t)&&P.call(t)==c}(t))return t;var r=t+"";return"0"==r&&1/t==-o?"-0":r}function nt(t){return function(t){return ft(t)&&ut(t)}(t)&&H.call(t,"callee")&&(!E.call(t,"callee")||P.call(t)==a)}var ot,it,at=Array.isArray;function ut(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!st(t)}function st(t){var r=ct(t)?P.call(t):"";return r==u||r==s}function ct(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function ft(t){return!!t&&"object"==typeof t}function ht(t){return ut(t)?J(t,!0):N(t)}function lt(){return[]}var pt=(ot=function(t,r){return null==t?{}:(r=y(function t(r,e,n,o,i){var a=-1,u=r.length;for(n||(n=tt),i||(i=[]);++a<u;){var s=r[a];e>0&&n(s)?e>1?t(s,e-1,n,o,i):_(i,s):o||(i[i.length]=s)}return i}(r,1),et),function(t,r){return function(t,r,e){for(var n=-1,o=r.length,i={};++n<o;){var a=r[n],u=t[a];e(u,a)&&(i[a]=u)}return i}(t=Object(t),r,function(r,e){return e in t})}(t,function(t,r,n,o){var i,a=-1,u=b,s=!0,c=t.length,f=[],h=r.length;if(!c)return f;n&&(r=y(r,(i=n,function(t){return i(t)}))),o?(u=v,s=!1):r.length>=e&&(u=m,s=!1,r=new B(r));t:for(;++a<c;){var l=t[a],p=n?n(l):l;if(l=o||0!==l?l:0,s&&p==p){for(var d=h;d--;)if(r[d]===p)continue t;f.push(l)}else u(r,p,o)||f.push(l)}return f}(Q(t),r)))},it=C(void 0===it?ot.length-1:it,0),function(){for(var t=arguments,r=-1,e=C(t.length-it,0),n=Array(e);++r<e;)n[r]=t[it+r];r=-1;for(var o=Array(it+1);++r<it;)o[r]=t[r];return o[it]=n,function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}(ot,this,o)}),dt={name:"MeteorData",props:{query:{type:Function,required:!0},tag:{type:String,default:"div"}},watch:{query:{handler:function(t){this.$_unwatch&&this.$_unwatch(),this.$_unwatch=this.$addMeteorData("meteorData",t)},immediate:!0}},render:function(t){var r=this.$scopedSlots.default({data:this.meteorData});return r=Array.isArray(r)?r.concat(this.$slots.default):[r].concat(this.$slots.default),t(this.tag,r)}},bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},yt={name:"MeteorSub",props:{name:{type:String,required:!0},parameters:{type:[Array,Function],default:void 0},tag:{type:String,default:"div"}},watch:{name:"updateSub",parameters:function(t,r){(void 0===t?"undefined":bt(t))!==(void 0===r?"undefined":bt(r))&&this.updateSub()}},created:function(){this.updateSub()},methods:{updateSub:function(){var t=this;this.$_unsub&&this.$_unsub();var r="function"==typeof this.parameters?this.parameters:function(){return t.parameters||[]};this.$_unsub=this.$addReactiveSub(this.name,r)}},render:function(t){var r=this.$scopedSlots.default({loading:!this.$subReady[this.name]});return r=Array.isArray(r)?r.concat(this.$slots.default):[r].concat(this.$slots.default),t(this.tag,r)}};function _t(){var t;return(t=Meteor).subscribe.apply(t,arguments)}function gt(t,r){return void 0!==t&&t.hasOwnProperty(r)}var mt=function(){},$t=void 0,jt={install:function(t,r){var e=t.prototype.$isServer,n=t.version.substr(0,t.version.indexOf("."));for(var o in t.config.meteor={subscribe:_t,freeze:!1},$t=t.set,r)t.config.meteor[o]=r[o];var i=t.config.optionMergeStrategies.methods;function a(){var t=this;this._trackerHandles=[],this._subsAutorun={},this._subs={},Object.defineProperty(this,"$subReady",{get:function(){return t.$data.$meteor.subs},enumerable:!0,configurable:!0})}function u(){this._meteorActive=!0;var t=this.$options.meteor;if(t){var r=!0;if(void 0!==t.$ssr&&(r=t.$ssr),!e||r){if(t.subscribe||t.$subscribe){var n=Object.assign({},t.subscribe,t.$subscribe);for(var o in n)this.$addReactiveSub(o,n[o])}var i=Object.assign({},pt(t,["subscribe","data"]),t.data);if(i)for(var a in i)if("$"!==a.charAt(0)){var u=i[a],s=void 0;if("function"!=typeof u)throw Error("Meteor data '"+a+"': You must provide a function which returns the result.");s=u.bind(this),this.$addMeteorData(a,s)}}}}t.config.optionMergeStrategies.meteor=function(t,r,e){if(!t)return r;if(!r)return t;var n=Object.assign({},pt(t,["subscribe","data"]),t.data),o=Object.assign({},pt(r,["subscribe","data"]),r.data);return Object.assign({subscribe:i(t.subscribe,r.subscribe)},i(n,o))},t.mixin(vt({data:function(){return{$meteor:{data:{},subs:{}}}}},"1"===n?{init:a}:{},"2"===n?{beforeCreate:a}:{},{created:function(){this.$options.meteor&&!this.$options.meteor.$lazy&&u.call(this)},destroyed:function(){this.$stopMeteor()},methods:{$subscribe:function(){for(var r=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(n.length>0){var i=n[0],a=this._subs[i],u=t.config.meteor.subscribe.apply(this,n);if(this._trackerHandles.push(u),this._subs[i]=u,"function"==typeof u.ready){$t(this.$data.$meteor.subs,i,!1),this._subsAutorun[i]&&this._subsAutorun[i].stop();var s=this.$autorun(function(){var t=u.ready();$t(r.$data.$meteor.subs,i,t),t&&a&&r.$stopHandle(a)});this._subsAutorun[i]=s}return u}throw new Error("You must provide the publication name to $subscribe.")},$autorun:function(t){var r=Tracker.autorun(t);return this._trackerHandles.push(r),r},$stopHandle:function(t){t.stop();var r=this._trackerHandles.indexOf(t);-1!==r&&this._trackerHandles.splice(r,1)},$startMeteor:function(){this._meteorActive||u.call(this)},$stopMeteor:function(){this._trackerHandles.forEach(function(t){try{t.stop()}catch(r){console.error(r,t)}}),this._trackerHandles=null,this._meteorActive=!1},$addReactiveSub:function(t,r){var n=this,o=void 0,i=void 0,a=function(r){o=n.$subscribe.apply(n,[t].concat(function(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)}(r)))};return"function"==typeof r?e?a(r.bind(this)()):i=this.$watch(r,function(t){a(t)},{immediate:!0}):a(r),function(){i&&i(),o&&n.$stopHandle(o)}},$addMeteorData:function(r,e){var n=this,o=gt(this.$data,r);o||gt(this,r)||gt(this.$props,r)||Object.defineProperty(this,r,{get:function(){return n.$data.$meteor.data[r]},enumerable:!0,configurable:!0});var i=function(t){$t(o?n.$data:n.$data.$meteor.data,r,t)};i(null);var a=void 0,u=function(){a&&n.$stopHandle(a)},s=this.$watch(function(){u(),a=n.$autorun(function(){var r,n;(n=e(r))&&"function"==typeof n.fetch&&(n=n.fetch()),t.config.meteor.freeze&&(n=Object.freeze(n)),i(n)})},mt,{immediate:!0});return function(){s(),u()}}}})),"2"===n&&(t.component("MeteorData",dt),t.component("meteor-data",dt),t.component("MeteorSub",yt),t.component("meteor-sub",yt))}},Ot=dt,St=yt;return t.default=jt,t.MeteorData=Ot,t.MeteorSub=St,t}({});
